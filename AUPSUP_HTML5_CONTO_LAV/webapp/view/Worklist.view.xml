<mvc:View controllerName="it.aupsup.conto_lav.controller.Worklist" 
xmlns:mvc="sap.ui.core.mvc" 
xmlns="sap.uxap" 
xmlns:layout="sap.ui.layout"
xmlns:m="sap.m" 
xmlns:table="sap.ui.table" 
xmlns:core="sap.ui.core" 
xmlns:personal="sap.uxap.sample.SharedBlocks.personal"
xmlns:form="sap.ui.layout.form" 
xmlns:fb="sap.ui.comp.filterbar" 
xmlns:sts="sap.ui.table.TreeTable">
	<m:Shell id="shell" appWidthLimited="false">
		<m:App id="app">
			<m:pages>
				<m:Page id="worklist">
					<m:customHeader>
						<m:Bar>
							<m:contentLeft>
								<m:Text text="{userapi>/firstname} {userapi>/lastname}"></m:Text>
							</m:contentLeft>
							<m:contentMiddle>
								<m:Text text="{i18n>title}" class="sapMTitle sapMTitleStyleAuto sapMTitleMaxWidth"></m:Text>
							</m:contentMiddle>
						</m:Bar>
					</m:customHeader>
					<m:content>
						<ObjectPageLayout id="ObjectPageLayout" headerContentPinnable="true" showFooter="true">
							<headerContent>
								<fb:FilterBar clear="onClearFilters" search="onSearchOrders" showRestoreButton="false" showClearButton="true" showClearOnFB="true">
									<fb:filterItems>
										<fb:FilterItem name="Metasupplier" label="{i18n>METASUP}"
											visible="{= ${VisibilityJSONModel>/isBuyer} === true || ${VisibilityJSONModel>/isPlanner} === true || ${VisibilityJSONModel>/isAdministrator} === true }">
											<fb:control>
												<m:MultiComboBox selectedKeys="{MetasupplierJSONModel>/METAID}" selectionChange="onChangeMetasupplier"
													items="{ path: 'MetasupplierJSONModel>/results', sorter: { path: 'METAID' } }">
													<core:Item key="{MetasupplierJSONModel>METAID}" text="{MetasupplierJSONModel>DESCR}"/>
												</m:MultiComboBox>
											</fb:control>
										</fb:FilterItem>
										<fb:FilterItem name="Lifnr" label="{i18n>LIFNR}"
											visible="{= ${VisibilityJSONModel>/isBuyer} === true || ${VisibilityJSONModel>/isPlanner} === true || ${VisibilityJSONModel>/isAdministrator} === true }">
											<fb:control>
												<m:MultiComboBox selectionChange="onChangeMetalifnr" showSecondaryValues="true"
													items="{ path: 'lifnrJSONModel>/', sorter: { path: 'LIFNR' } }">
													<core:ListItem key="{lifnrJSONModel>LIFNR}" text="{lifnrJSONModel>DESCR}" additionalText="{lifnrJSONModel>LIFNR}"/>
												</m:MultiComboBox>
											</fb:control>
										</fb:FilterItem>
										<fb:FilterItem name="Ebelp" label="{i18n>EBELP}">
											<fb:control>
												<m:Input value="{filterOrdersJSONModel>/ebelp}" submit="onSearchOrders"/>
											</fb:control>
										</fb:FilterItem>
										<fb:FilterItem name="Matnr" label="{i18n>MATNR}">
											<fb:control>
												<m:Input type="Text" value="{filterOrdersJSONModel>/MatnrDesc}" showValueHelp="true" valueHelpOnly="true" valueHelpRequest="handleMatnr"
													class="sapUiSmallMarginBottom" submit="onSearchOrders"/>
											</fb:control>
										</fb:FilterItem>
										<fb:FilterItem name="Plant" label="{i18n>WERKS}">
											<fb:control>
												<m:MultiComboBox selectedKeys="{filterOrdersJSONModel>/werks}" visible="true"
													items="{ path: 'PlantsJSONModel>/results', sorter: { path: 'EWERK' } }" showSecondaryValues="true">
													<core:ListItem key="{PlantsJSONModel>EWERK}" text="{PlantsJSONModel>DESCR}" additionalText="{PlantsJSONModel>EWERK}"/>
												</m:MultiComboBox>
											</fb:control>
										</fb:FilterItem>
										<fb:FilterItem name="Days" label="{i18n>DAYS}">
											<fb:control>
												<m:Input value="{filterOrdersJSONModel>/days}" submit="onSearchOrders"/>
											</fb:control>
										</fb:FilterItem>                                                  
									</fb:filterItems>
								</fb:FilterBar>
							</headerContent>
							<sections>
								<ObjectPageSection showTitle="false">
									<subSections>
										<ObjectPageSubSection >
										
										<table:TreeTable id="TreeTableBasic" selectionMode="Single" expandFirstLevel="false" visibleRowCount="20"
											rows="{path:'DocumentsJSONModel>/results', parameters: {arrayNames:['riga']}}"
											ariaLabelledBy="title">
											<table:extension>
												<m:OverflowToolbar style="Clear">
													<m:Title id="title" text="Clothing"/>
													<m:ToolbarSpacer/>
													<m:Button text="Collapse all" press="onCollapseAll"/>
													<m:Button text="Expand all" press="onExpandAll"/>
													<m:Button icon="sap-icon://legend" press="onLegend" tooltip="{i18n>Legend}"/>
													<m:Button icon="sap-icon://excel-attachment" press="onExport" tooltip="{i18n>Export_Excel}"/>
												</m:OverflowToolbar>
											</table:extension>
											<table:rowSettingsTemplate>
												<table:RowSettings highlight="{DocumentsJSONModel>SEMA}"/>
											</table:rowSettingsTemplate>
												<table:columns>
													<table:Column width="13rem">
														<m:Label text="{i18n>DESC_METAID}"/>
														<table:template>
															<m:Text text="{DocumentsJSONModel>DESC_METAID}" wrapping="false"/>
														</table:template>
													</table:Column>
													<table:Column width="13rem">
														<m:Label text="{i18n>LIFNR}"/>
														<table:template>
															<m:Text text="{DocumentsJSONModel>LIFNR}" wrapping="false"/>
														</table:template>
													</table:Column>
													<table:Column width="13rem">
														<m:Label text="{i18n>NAME_LIFNR}"/>
														<table:template>
															<m:Text text="{DocumentsJSONModel>NAME_LIFNR}" wrapping="false"/>
														</table:template>
													</table:Column>
													<table:Column width="13rem">
														<m:Label text="{i18n>WERKS}"/>
														<table:template>
															<m:Text text="{DocumentsJSONModel>WERKS}" wrapping="false"/>
														</table:template>
													</table:Column>
													<table:Column width="13rem">
														<m:Label text="{i18n>PLANT_DESCR}"/>
														<table:template>
															<m:Text text="{DocumentsJSONModel>WERKS_DESCR}" wrapping="false"/>
														</table:template>
													</table:Column>
													<table:Column width="13rem">
														<m:Label text="{i18n>MATNR}"/>
														<table:template>
															<m:Text text="{DocumentsJSONModel>MATNR}" wrapping="false"/>
														</table:template>
													</table:Column>
													<table:Column width="13rem">
														<m:Label text="{i18n>DESC_MATNR}"/>
														<table:template>
															<m:Text text="{DocumentsJSONModel>DESC_MATNR}" wrapping="false"/>
														</table:template>
													</table:Column>
													<table:Column width="13rem">
														<m:Label text="{i18n>COMP_MATNR}"/>
														<table:template>
															<m:Text text="{DocumentsJSONModel>COMP_MATNR}" wrapping="false"/>
														</table:template>
													</table:Column>
													<table:Column width="13rem">
														<m:Label text="{i18n>DESC_COMP}"/>
														<table:template>
															<m:Text text="{DocumentsJSONModel>DESC_COMP}" wrapping="false"/>
														</table:template>
													</table:Column>
													<table:Column width="9rem">
														<m:Label text="{i18n>LBINS}"/>
														<table:template>
															<m:Text text="{path : 'DocumentsJSONModel>LBINS', formatter: '.importFormatter'}" wrapping="false"/>
														</table:template>
													</table:Column>
													<table:Column width="9rem">
														<m:Label text="{i18n>LBLAB}"/>
														<table:template>
															<m:Text text="{path : 'DocumentsJSONModel>LBLAB', formatter: '.importFormatter'}" wrapping="false"/>
														</table:template>
													</table:Column>
													<table:Column width="9rem">
														<m:Label text="{i18n>TOT_GIAC}"/>
														<table:template>
															<m:Text text="{path : 'DocumentsJSONModel>TOT_GIAC', formatter: '.importFormatter'}" wrapping="false"/>
														</table:template>
													</table:Column>
													<table:Column width="9rem">
														<m:Label text="{i18n>MEINS}"/>
														<table:template>
															<m:Text text="{DocumentsJSONModel>MEINS}" wrapping="false"/>
														</table:template>
													</table:Column>
													<table:Column width="9rem">
														<m:Label text="{i18n>EBELN}"/>
														<table:template>
															<m:Text text="{DocumentsJSONModel>EBELN}" wrapping="false"/>
														</table:template>
													</table:Column>
													<table:Column width="9rem">
														<m:Label text="{i18n>EBELP}"/>
														<table:template>
															<m:Text text="{DocumentsJSONModel>EBELP}" wrapping="false"/>
														</table:template>
													</table:Column>
													<table:Column width="9rem">
														<m:Label text="{i18n>FIRST}"/>
														<table:template>
															<m:Text text="{ path: 'DocumentsJSONModel>FIRST', type: 'it.aupsup.conto_lav.type.Date' }" wrapping="false"/>
														</table:template>
													</table:Column>
												</table:columns>
											</table:TreeTable>
										</ObjectPageSubSection>
									</subSections>
								</ObjectPageSection>
							</sections>
						</ObjectPageLayout>
					</m:content>
				</m:Page>
			</m:pages>
		</m:App>
	</m:Shell>
</mvc:View>