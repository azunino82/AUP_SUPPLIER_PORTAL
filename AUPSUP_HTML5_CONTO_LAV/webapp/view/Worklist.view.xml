<mvc:View controllerName="it.aupsup.conto_lav.controller.Worklist" xmlns:mvc="sap.ui.core.mvc" xmlns="sap.uxap" xmlns:layout="sap.ui.layout"
	xmlns:m="sap.m" xmlns:table="sap.ui.table" xmlns:core="sap.ui.core" xmlns:personal="sap.uxap.sample.SharedBlocks.personal"
	xmlns:form="sap.ui.layout.form" xmlns:fb="sap.ui.comp.filterbar">
	<m:Shell id="shell" appWidthLimited="false">
		<m:App id="app">
			<m:pages>
				<m:Page id="worklist">
					<m:customHeader>
						<m:Bar>
							<m:contentLeft>
								<m:Text text="{userapi>/firstname} {userapi>/lastname}"></m:Text>
							</m:contentLeft>
							<m:contentMiddle>
								<m:Text text="{i18n>title}" class="sapMTitle sapMTitleStyleAuto sapMTitleMaxWidth"></m:Text>
							</m:contentMiddle>
						</m:Bar>
					</m:customHeader>
					<m:content>
						<ObjectPageLayout id="ObjectPageLayout" headerContentPinnable="true" showFooter="true">
							<headerContent>
								<fb:FilterBar clear="onClearFilters" search="onSearchOrders" showRestoreButton="false" showClearButton="true" showClearOnFB="true">
									<fb:filterItems>
										<fb:FilterItem name="Metasupplier" label="{i18n>METASUP}"
											visible="{= ${VisibilityJSONModel>/isBuyer} === true || ${VisibilityJSONModel>/isPlanner} === true || ${VisibilityJSONModel>/isAdministrator} === true }">
											<fb:control>
												<m:MultiComboBox selectedKeys="{MetasupplierJSONModel>/METAID}" selectionChange="onChangeMetasupplier"
													items="{ path: 'MetasupplierJSONModel>/results', sorter: { path: 'METAID' } }">
													<core:Item key="{MetasupplierJSONModel>METAID}" text="{MetasupplierJSONModel>DESCR}"/>
												</m:MultiComboBox>
											</fb:control>
										</fb:FilterItem>
										<fb:FilterItem name="Lifnr" label="{i18n>supplier}"
											visible="{= ${VisibilityJSONModel>/isBuyer} === true || ${VisibilityJSONModel>/isPlanner} === true || ${VisibilityJSONModel>/isAdministrator} === true }">
											<fb:control>
												<m:MultiComboBox selectionChange="onChangeMetalifnr" showSecondaryValues="true"
													items="{ path: 'lifnrJSONModel>/', sorter: { path: 'LIFNR' } }">
													<core:ListItem key="{lifnrJSONModel>LIFNR}" text="{lifnrJSONModel>DESCR}" additionalText="{lifnrJSONModel>LIFNR}"/>
												</m:MultiComboBox>
											</fb:control>
										</fb:FilterItem>
										<fb:FilterItem name="Ebelp" label="{i18n>EBELP}">
											<fb:control>
												<m:Input value="{filterOrdersJSONModel>/ebelp}" submit="onSearchOrders"/>
											</fb:control>
										</fb:FilterItem>
										<fb:FilterItem name="Matnr" label="{i18n>MATNR}">
											<fb:control>
												<m:Input type="Text" value="{filterOrdersJSONModel>/MatnrDesc}" showValueHelp="true" valueHelpOnly="true" valueHelpRequest="handleMatnr"
													class="sapUiSmallMarginBottom" submit="onSearchOrders"/>
											</fb:control>
										</fb:FilterItem>
										<fb:FilterItem name="Plant" label="{i18n>WERKS}">
											<fb:control>
												<m:MultiComboBox selectedKeys="{filterOrdersJSONModel>/werks}" visible="true"
													items="{ path: 'PlantsJSONModel>/results', sorter: { path: 'EWERK' } }" showSecondaryValues="true">
													<core:ListItem key="{PlantsJSONModel>EWERK}" text="{PlantsJSONModel>DESCR}" additionalText="{PlantsJSONModel>EWERK}"/>
												</m:MultiComboBox>
											</fb:control>
										</fb:FilterItem>
										<fb:FilterItem name="Days" label="{i18n>DAYS}">
											<fb:control>
												<m:Input value="{filterOrdersJSONModel>/days}" submit="onSearchOrders"/>
											</fb:control>
										</fb:FilterItem>                                                  
									</fb:filterItems>
								</fb:FilterBar>
							</headerContent>
							<sections>
								<ObjectPageSection showTitle="false">
									<subSections>
										<ObjectPageSubSection >
											 <TreeTable
												id="TreeTableBasic"
												rows="{path:'/catalog/clothing', parameters: {arrayNames:['categories']}}"
												selectionMode="MultiToggle"
												enableSelectAll="false"
												ariaLabelledBy="title">
											<extension>
												<m:OverflowToolbar style="Clear">
													<m:Title id="title" text="Clothing"/>
													<m:ToolbarSpacer/>
													<m:Button text="Collapse all" press="onCollapseAll"/>
													<m:Button text="Collapse selection" press="onCollapseSelection"/>
													<m:Button text="Expand first level" press="onExpandFirstLevel"/>
													<m:Button text="Expand selection" press="onExpandSelection"/>
												</m:OverflowToolbar>
											</extension>
											<columns>
												<Column width="13rem">
													<m:Label text="Categories"/>
													<template>
														<m:Text text="{name}" wrapping="false" />
													</template>
												</Column>
												<Column width="9rem">
													<m:Label text="Price"/>
													<template>
														<u:Currency value="{amount}" currency="{currency}"/>
													</template>
												</Column>
												<Column width="11rem">
													<m:Label text="Size"/>
													<template>
														<m:Select
																items="{path: '/sizes', templateShareable: true}"
																selectedKey="{size}"
																visible="{= !!${size}}"
																forceSelection="false">
															<core:Item key="{key}" text="{value}"/>
														</m:Select>
													</template>
												</Column>
											</columns>
										</TreeTable>
										</ObjectPageSubSection>
									</subSections>
								</ObjectPageSection>
							</sections>
						</ObjectPageLayout>
					</m:content>
				</m:Page>
			</m:pages>
		</m:App>
	</m:Shell>
</mvc:View>